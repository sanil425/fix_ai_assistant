{
  "name": "New Order - Single",
  "msgType": "D",
  "purpose": "Create a new order (market/limit/stop/stop-limit) with Day/GTD/IOC/FOK handling.",
  "required": [
    "11",  "54", "60", "40", "OrderQtyData", "Instrument"
  ],
  "components": {
    "Instrument": "components/Instrument.json",
    "OrderQtyData": "components/OrderQtyData.json"
  },
  "fields": {
    "11": { "name": "ClOrdID", "type": "String", "role": "Client-assigned unique order id" },
    "21": { "name": "HandlInst", "type": "char", "optional": true, "notes": "Handling instruction" },
    "18": { "name": "ExecInst", "type": "MultipleValueString", "optional": true, "notes": "Space-delimited flags" },
    "1":  { "name": "Account", "type": "String", "optional": true },
    "589": { "name": "DayBookingInst", "type": "char", "optional": true },
    "100": { "name": "ExDestination", "type": "Exchange", "optional": true },
    "54": { "name": "Side", "type": "char", "enum": ["1","2"], "notes": "Buy=1, Sell=2" },
    "60": { "name": "TransactTime", "type": "UTCTimestamp", "notes": "Time order was released" },
    "40": { "name": "OrdType", "type": "char", "enum": ["1","2","3","4","D","E","G","J","K","P"], "notes": "MVP supports Market, Limit, Stop, StopLimit, PrevQuoted, PrevIndicated, ForexSwap (pass-through), MIT, MarketWithLeftoverAsLimit, Pegged" },
    "44": { "name": "Price", "type": "Price", "conditional": "Required iff OrdType=2 (Limit) or used as a limit cap on pegged" },
    "99": { "name": "StopPx", "type": "Price", "conditional": "Required iff OrdType=3 (Stop) or 4 (StopLimit)" },
    "59": { "name": "TimeInForce", "type": "char", "optional": true, "default": "0", "enum": ["0","1","3","4","6"], "notes": "0=Day,1=GTC,3=IOC,4=FOK,6=GTD" },
    "432": { "name": "ExpireDate", "type": "LocalMktDate", "conditional": "TIF=GTD and 126 missing" },
    "126": { "name": "ExpireTime", "type": "UTCTimestamp", "conditional": "TIF=GTD and 432 missing" },
    "15": { "name": "Currency", "type": "Currency", "optional": true },
    "58": { "name": "Text", "type": "String", "optional": true }
  },
  "constraints": [
    {
      "if": { "40": "2" },
      "then": { "must_have": ["44"] },
      "explain": "Limit orders must include Price (44)."
    },
    {
      "if_any_of": [{ "40": "3" }, { "40": "4" }],
      "then": { "must_have": ["99"] },
      "explain": "Stop/StopLimit require StopPx (99)."
    },
    {
      "if": { "59": "6" },
      "then": { "must_have_one_of": ["432", "126"] },
      "explain": "GTD requires an ExpireDate or ExpireTime."
    },
    {
      "rule": "LeavesQty = OrderQty - CumQty",
      "scope": "engine",
      "explain": "For status/execution math."
    }
  ],
  "component_requirements": {
    "Instrument": { "must_identify": "one_of(Symbol(55), (SecurityID(48)+SecurityIDSource(22)))" },
    "OrderQtyData": { "must_identify": "one_of(OrderQty(38), CashOrderQty(152), OrderPercent(516))" }
  },
  "tif_profiles": {
    "Day":   { "59": "0" },
    "GTD":   { "59": "6", "require": ["432|126"] },
    "IOC":   { "59": "3" },
    "FOK":   { "59": "4" }
  },
  "ordtype_profiles": {
    "Market":     { "40": "1" },
    "Limit":      { "40": "2", "require": ["44"] },
    "Stop":       { "40": "3", "require": ["99"] },
    "StopLimit":  { "40": "4", "require": ["44","99"] }
  },
  "examples": [
    {
      "label": "Limit Day",
      "min": true,
      "fields": { "11": "A1-001", "54": "1", "60": "2025-08-14T01:02:03Z", "40": "2", "44": 125.5, "59": "0" },
      "components": {
        "Instrument": { "55": "AAPL" },
        "OrderQtyData": { "38": 1000 }
      }
    },
    {
      "label": "StopLimit GTD",
      "fields": { "11": "A1-002", "54": "2", "60": "2025-08-14T01:05:00Z", "40": "4", "44": 100.0, "99": 101.0, "59": "6", "432": "2025-08-31" },
      "components": {
        "Instrument": { "48": "US0378331005", "22": "4" },
        "OrderQtyData": { "38": 500 }
      }
    }
  ],
  "spec_refs": [
    "FIX 4.4 Vol 4: New Order - Single overview and usage",
    "FIX 4.4 Vol 6: OrdType values and semantics"
  ]
}
